<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Edit cafe</title>
</head>
<body>
<form th:method="PATCH" th:action="@{/cafes/{id}(id=${cafe.getId()})}" th:object="${cafe}">
  <label for="name">Name: </label>
  <input type="text" th:field="*{name}" id="name"/>
  <div style="color:red" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Name Error</div>
  <br/>
  <label for="phone">Phone number: </label>
  <input type="text" th:field="*{phone}" id="phone"/>
  <div style="color:red" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}">Phone Error</div>
  <br/>
  <label for="address">Address: </label>
  <!--  <input type="text" th:field="*{address}" id="address"/>-->
  <textarea th:field="*{address}" id="address" rows="4" cols="50">
  </textarea>
  <div style="color:red" th:if="${#fields.hasErrors('address')}" th:errors="*{address}">Address Error</div>
  <br/>
  <div sec:authorize="hasAnyRole('ADMIN', 'GLOBAL_MANAGER')">
  <label for="manager">Manager: </label>
  <select th:field="*{manager.id}" id="manager">
    <option th:each="manager : ${managers}" th:value="${manager.getId()}"
            th:text="${manager.getLogin()}"></option>
  </select>
  </div>
  <br/>
  <label for="dishes">Dishes: </label>
  <th:block th:each="dish : ${dishes}">
    <input type="checkbox" th:field="*{dishes}"
           th:value="${dish.getId()}" th:text="${dish.getName()}" id="dishes">
  </th:block>
  <br/>
  <input type="submit" value="Update"/>
</form>
</body>
</html>